<h1 class="listconsignaciones text-center">Listado de consignaciones</h1>

<div class="input-container">
    <input class="input-codigo m-4" (keyup)="searchPorNombre()"  placeholder="Buscar por nombre de consigncion" [(ngModel)]="valorinput1" type="text" />
    <input class="input-codigo m-4" (keyup)="searchPorCodCosignacion()"  placeholder="Buscar por codigo consignaicon" [(ngModel)]="valorinput2" type="text" />
    <button class="button" (click)="openModal()" nz-button nzType="primary">Agregar</button>
</div>
<div class="table-container">
    <nz-table class="responsive-table" #basicTable [nzData]="consignacion">
        <thead>
          <tr>
            <th class="text-center">Codigo</th>
            <th class="text-center">Nombre</th>
            <th class="text-center">Apellido</th>
            <th class="text-center">Instagram</th>
            <th class="text-center">Domicilio</th>
            <th class="text-center">Celular</th>
            <th class="text-center">CbuAlias</th>
            <th class="text-center">Cbservacion</th>
            <th class="text-center">Activo</th>
            <th class="text-center">Ver Productos</th>
            <th class="text-center">Editar</th>
            <th class="text-center">Desactivar</th>
            <th class="text-center">Activar</th>
          </tr>
        </thead>
        <tbody>
            @for (data of basicTable.data; track $index) {
                <tr>
                  <td class="text-center">{{ data.codconsignacion }}</td>
                  <td class="text-center">{{ data.nombre }}</td>
                  <td class="text-center">{{ data.apellido }}</td>
                  <td class="text-center">{{ data.instagram }}</td>
                  <td class="text-center">{{ data.domicilio }}</td>
                  <td class="text-center">{{ data.celular }}</td>
                  <td class="text-center">{{ data.cbuAlias }}</td>
                  <td class="text-center">{{ data.observacion }}</td>
                  <td class="text-center">{{ data.activo }}</td>
                  <td>
                    <button class="nz-button" [routerLink]="['/productocons', data.idconsignacion]" 
                     nz-button nzType="primary">
                        Ver
                    </button>
                </td>
                <td>
                    <button class="nz-button" (click)="edit(data)" nz-button nzType="primary">Editar</button>
                </td>
                <td>
                    <button class="nz-button" nz-popconfirm 
                    nzPopconfirmTitle="Estas seguro que desea desactivar la consignacion?"
                    nzPopconfirmPlacement="bottom"
                    (nzOnConfirm)="desactivarConsignacion(data.idconsignacion || '')"
                     nz-button nzType="primary"> 
                     desactivar
                    </button>
                </td>
                <td>
                    <button class="nz-button" nz-popconfirm
                    nzPopconfirmTitle="Estas seguro que desea activar la consignacion?"
                    nzPopconfirmPlacement="bottom"
                    (nzOnConfirm)="activarConsignacion(data.idconsignacion || '')"
                     nz-button nzType="primary">
                        activar
                    </button>
                </td>
                </tr>
            }
        </tbody>
    </nz-table>
</div>

<nz-modal [(nzVisible)]="isVisible"  [nzTitle]="form.idconsignacion?'Editar consignacion':'Agregar consignaicon'" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <ng-container *nzModalContent>
        <input nz-input placeholder="Codigo" [(ngModel)]="form.codconsignacion" type="text" />
        <input class="mt-3" nz-input placeholder="Nombre" [(ngModel)]="form.nombre" type="text" />
        <input class="mt-3" nz-input placeholder="Apellido" [(ngModel)]="form.apellido" type="text" />
        <input class="mt-3" nz-input placeholder="Instagram" [(ngModel)]="form.instagram" type="text" />
        <input class="mt-3" nz-input placeholder="Domicilio"[(ngModel)]="form.domicilio" type="text" />
        <input class="mt-3" nz-input placeholder="Celular" [(ngModel)]="form.celular" type="text" />
        <input class="mt-3" nz-input placeholder="Cbu/Alias" [(ngModel)]="form.cbuAlias" type="text" />
        <input class="mt-3" nz-input placeholder="Observacion" [(ngModel)]="form.observacion" type="text" />
        <input class="mt-3" nz-input placeholder="Activo" [(ngModel)]="form.activo" type="text" />
    </ng-container>
  </nz-modal>

