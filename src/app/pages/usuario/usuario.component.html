<h1 class="listusuarios text-center">Listado de usuarios {{userId}}</h1>

<div class="flex justify-content-between p-5">
    <div class="input">
        <input (keyup)="search()" nz-input placeholder="Buscar por nombre" [(ngModel)]="value" type="text" />
    </div>
    <button (click)="openModal()" nz-button nzType="primary">Agregar</button>
</div>

<div class="table-container">
    <nz-table class="responsive-table" #basicTable [nzData]="listOfData">
        <thead>
          <tr>
            <th class="text-center">ID</th>
            <th class="text-center">Nombre</th>
            <th class="text-center">Apellido</th>
            <th class="text-center">Email</th>
            <th class="text-center">Usuario</th>
            <th class="text-center">Activo</th>
            <th class="text-center">Editar</th>
            <th class="text-center">Desactivar</th>
            <th class="text-center">Activar</th>
          </tr>
        </thead>
        <tbody class="align-item-center">
            @for (data of basicTable.data; track $index) {
                <tr>
                    <td class="text-center">{{ data.iduser}}</td>
                  <td class="text-center">{{ data.nombre }}</td>
                  <td class="text-center">{{ data.apellido }}</td>
                  <td class="text-center">{{ data.email }}</td>
                  <td class="text-center">{{ data.usuario }}</td>
                  <td class="text-center">{{ data.activo }}</td>
                <td>
                    <button (click)="edit(data)" nz-button nzType="primary"> 
                        <span  nz-icon nzType="drop"></span>
                        Editar
                    </button>
                </td>
                <td>
                    <button nz-popconfirm 
                    nzPopconfirmTitle="Estas seguro que desea desactivar el usuario?"
                    nzPopconfirmPlacement="bottom"
                    (nzOnConfirm)="desactivarUsuario(data.iduser || '')"
                     nz-button nzType="primary"> 
                     desactivar
                    </button>
                </td>
                <td>
                    <button nz-popconfirm
                    nzPopconfirmTitle="Estas seguro que desea activar el usuario?"
                    nzPopconfirmPlacement="bottom"
                    (nzOnConfirm)="activarUsuario(data.iduser || '')"
                     nz-button nzType="primary">
                        activar
                    </button>
                </td>
                </tr>
            }
        </tbody>
    </nz-table>
</div>

<nz-modal [(nzVisible)]="isVisible"  [nzTitle]="form.iduser?'Editar usuario':'Agregar usuario'" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <ng-container *nzModalContent>
        <input class="mt-3" nz-input placeholder="Nombre" [(ngModel)]="form.nombre" type="text" />
        <input class="mt-3" nz-input placeholder="Apellido" [(ngModel)]="form.apellido" type="text" />
        <input class="mt-3" nz-input placeholder="Email" [(ngModel)]="form.email" type="text" />
        <input class="mt-3" nz-input placeholder="Usuario" [(ngModel)]="form.usuario" type="text" />
        <input class="mt-3" nz-input placeholder="Activo" [(ngModel)]="form.activo" type="text" />
    </ng-container>
</nz-modal>